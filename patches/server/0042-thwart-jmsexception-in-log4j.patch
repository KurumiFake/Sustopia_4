From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: KurumiFake <kurumiisshidowife@gmail.com>
Date: Wed, 29 Dec 2021 12:04:55 +0000
Subject: [PATCH] thwart jmsexception in log4j


diff --git a/src/main/java/org/apache/logging/log4j/core/appender/mom/JmsAppender.java b/src/main/java/org/apache/logging/log4j/core/appender/mom/JmsAppender.java
index 0d0d44631abddf0c49c8029c76fe689198220d25..987c44fa771f6a4891bff5db40f8a5ff318f9c52 100644
--- a/src/main/java/org/apache/logging/log4j/core/appender/mom/JmsAppender.java
+++ b/src/main/java/org/apache/logging/log4j/core/appender/mom/JmsAppender.java
@@ -21,8 +21,6 @@ import java.io.Serializable;
 import java.util.Properties;
 import java.util.concurrent.TimeUnit;
 
-import javax.jms.JMSException;
-
 import org.apache.logging.log4j.core.Appender;
 import org.apache.logging.log4j.core.Filter;
 import org.apache.logging.log4j.core.Layout;
@@ -115,13 +113,13 @@ public class JmsAppender extends AbstractAppender {
                 LOGGER.error("No layout provided for JmsAppender");
                 return null;
             }
-            try {
+            //try {
                 return new JmsAppender(getName(), getFilter(), layout, isIgnoreExceptions(), getPropertyArray(),
                         actualJmsManager);
-            } catch (final JMSException e) {
+            /*} catch (final JMSException e) {
                 // Never happens since the ctor no longer actually throws a JMSException.
                 throw new IllegalStateException(e);
-            }
+            }*/
         }
 
         public Builder setDestinationBindingName(final String destinationBindingName) {
@@ -226,24 +224,19 @@ public class JmsAppender extends AbstractAppender {
 
     /**
      * Constructs a new instance.
-     *
-     * @throws JMSException not thrown as of 2.9 but retained in the signature for compatibility, will be removed in 3.0
      */
     protected JmsAppender(final String name, final Filter filter, final Layout<? extends Serializable> layout,
-            final boolean ignoreExceptions, final Property[] properties, final JmsManager manager) throws JMSException {
+            final boolean ignoreExceptions, final Property[] properties, final JmsManager manager) /*throws JMSException*/ {
         super(name, filter, layout, ignoreExceptions, properties);
         this.manager = manager;
     }
 
     /**
      * Constructs a new instance.
-     *
-     * @throws JMSException not thrown as of 2.9 but retained in the signature for compatibility, will be removed in 3.0
-     * @deprecated Use {@link #JmsAppender(String, Filter, Layout, boolean, Property[], JmsManager)}.
      */
     @Deprecated
     protected JmsAppender(final String name, final Filter filter, final Layout<? extends Serializable> layout,
-            final boolean ignoreExceptions, final JmsManager manager) throws JMSException {
+            final boolean ignoreExceptions, final JmsManager manager) /*throws JMSException*/ {
         super(name, filter, layout, ignoreExceptions, Property.EMPTY_ARRAY);
         this.manager = manager;
     }
